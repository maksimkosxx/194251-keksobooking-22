{"version":3,"sources":["webpack://keksobooking/./source/js/api.js","webpack://keksobooking/./source/js/change-filters.js","webpack://keksobooking/./source/js/create-element.js","webpack://keksobooking/./source/js/create-features.js","webpack://keksobooking/./source/js/create-message.js","webpack://keksobooking/./source/js/create-photos.js","webpack://keksobooking/./source/js/create-popup.js","webpack://keksobooking/./source/js/error.js","webpack://keksobooking/./source/js/filters.js","webpack://keksobooking/./source/js/helpers.js","webpack://keksobooking/./source/js/map.js","webpack://keksobooking/./source/js/upload-image.js","webpack://keksobooking/./source/js/use-form.js","webpack://keksobooking/./source/js/utils.js","webpack://keksobooking/./source/js/validation.js","webpack://keksobooking/webpack/bootstrap","webpack://keksobooking/webpack/runtime/define property getters","webpack://keksobooking/webpack/runtime/hasOwnProperty shorthand","webpack://keksobooking/webpack/runtime/make namespace object","webpack://keksobooking/./source/js/main.js"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["import changeFilters from './change-filters.js';\nimport createApiResponse from './error.js';\nimport {mainForm, mapFilterForm} from './utils.js';\nimport {setAddressValue} from './helpers.js';\nimport createMessage from './create-message.js';\nimport {checkPriceValidity, checkRoomsValidity} from './validation.js';\n\nconst URL = {\n  get: 'https://22.javascript.pages.academy/keksobooking/data',\n  post: 'https://22.javascript.pages.academy/keksobooking',\n}\n\nconst getData = (cb) => {\n  fetch(URL.get)\n    .then((response) => {\n      if(response.ok ) {\n        return response.json()\n      }\n      throw new Error(`${response.status} ${response.statusText}`);\n    })\n    .then(json => {\n      cb(json);\n      changeFilters(() => cb(json))\n    })\n    .catch(err => {\n      createApiResponse(err);\n    })\n}\n\nconst setData = () => {\n  mainForm.addEventListener('submit', (evt) => {\n\n    evt.preventDefault();\n\n    checkPriceValidity();\n    checkRoomsValidity();\n\n    const formData = new FormData(evt.target);\n\n    fetch(URL.post,\n      {\n        method: 'POST',\n        body: formData,\n      })\n      .then((response) => {\n        if(response.ok) {\n          mainForm.reset();\n          mapFilterForm.reset();\n          setAddressValue();\n          createMessage('success');\n        } else {\n          throw new Error;\n        }\n      })\n      .catch(() => createMessage('error'))\n  })\n}\n\nexport {getData, setData};\n","/* global _:readonly */\nimport {mapFilterForm} from './utils.js';\n\nconst RERENDER_DELAY = 500;\n\nconst changeFilters = (cb) => {\n\n  mapFilterForm.addEventListener('change', (_.throttle(() => cb(), RERENDER_DELAY)))\n}\n\nexport default changeFilters;\n","\nconst createElement = (element, content) => {\n  if (element.textContent.length) {\n    element.textContent = content\n  } else\n    element.remove();\n}\nexport default  createElement;\n","\nconst createFeaturesList = (template, array) => {\n  template.innerHTML = ''\n  if (array.length) {\n    array.map(el => {\n      const listItem = document.createElement('li');\n      listItem.classList.add('popup__feature', `popup__feature--${el}`);\n      template.appendChild(listItem);\n    });\n  } else {\n    template.remove()\n  }\n}\nexport default createFeaturesList;\n","import {pageBody} from './utils.js';\nimport {handlerKeyDown, handlerClick} from './helpers.js';\n\nconst createMessage = (selector) => {\n\n  const messageId = `#${selector}`;\n  const messageClass = `.${selector}`;\n  const messageBtnClass = `${messageClass}__button`;\n  const initTemplate = document.querySelector(messageId).content.cloneNode(true);\n  const newMessage = initTemplate.querySelector(messageClass);\n  const messageBtn = initTemplate.querySelector(messageBtnClass);\n  pageBody.appendChild(newMessage);\n\n  handlerKeyDown(pageBody, newMessage);\n  messageBtn ? handlerClick(messageBtn, newMessage) : handlerClick(pageBody, newMessage);\n}\n\nexport default createMessage;\n","const createPhotosList = (list, item, array, alt) => {\n  list.innerHTML = ''\n  if (array.length) {\n    array.map(link => {\n      const listItem = item.cloneNode(true);\n      listItem.src = link;\n      listItem.alt = alt;\n      list.appendChild(listItem);\n    })\n  } else {\n    list.remove()\n  }\n}\n\nexport default createPhotosList;\n","import {getType} from './helpers.js';\nimport createElement from './create-element.js';\nimport createFeaturesList from './create-features.js';\nimport createPhotosList from './create-photos.js';\n\nconst initTemplate = document.querySelector('#card').content;\nconst templateItem = initTemplate.querySelector('.popup');\n\n\nconst createPopup = data => {\n\n  const newItem = templateItem.cloneNode(true);\n  const title = newItem.querySelector('.popup__title');\n  const address = newItem.querySelector('.popup__text--address');\n  const price = newItem.querySelector('.popup__text--price');\n  const type = newItem.querySelector('.popup__type');\n  const capacity = newItem.querySelector('.popup__text--capacity');\n  const time = newItem.querySelector('.popup__text--time');\n  const features = newItem.querySelector('.popup__features');\n  const description = newItem.querySelector('.popup__description');\n  const photos = newItem.querySelector('.popup__photos');\n  const photo = photos.querySelector('.popup__photo');\n  const usePhoto = newItem.querySelector('.popup__avatar');\n\n  const {offer} = data;\n  const {avatar} = data.author;\n\n  createElement(title, offer.title);\n  createElement(address, offer.address);\n  createElement(price, `${offer.price} ₽/ночь`);\n  createElement(type, getType[offer.type]);\n  createElement(capacity, `${offer.rooms} комнаты для ${offer.guests} гостей`);\n  createElement(time, `Заезд после ${offer.checkin}, выезд до ${offer.checkout}`);\n  createFeaturesList(features, offer.features);\n  createElement(description, offer.description);\n  createPhotosList(photos, photo, offer.photos, offer.title);\n  usePhoto.src = avatar;\n\n  return newItem;\n}\n\nexport default createPopup;\n","import {mainForm, mapFilterForm, pageBody} from './utils.js';\nimport {addDisabledValue, handlerClick, handlerKeyDown} from './helpers.js';\n\n\n\nconst mapFeatures = document.querySelector('.map__features');\nconst allMapFilters = mapFilterForm.querySelectorAll('.map__filter');\nconst allFieldset = mainForm.querySelectorAll('fieldset');\n\n\nconst createApiResponse = err => {\n\n  mainForm.classList.add('ad-form--disabled');\n  addDisabledValue(allFieldset, true);\n  mapFilterForm.classList.add('map__filters--disabled');\n  mapFeatures.classList.add('map__features--disabled');\n  addDisabledValue(allMapFilters, true);\n\n  const layout = document.createElement('div');\n  layout.classList.add('message__layout')\n  const popup =  document.createElement('div');\n  popup.classList.add('message__popup')\n  const close =  document.createElement('button');\n  close.classList.add('message__close');\n  close.tabIndex = 0;\n  close.textContent = '×';\n  const title =  document.createElement('h3');\n  title.classList.add('message__title');\n  title.textContent = err;\n  const description =  document.createElement('p');\n  description.classList.add('message__description');\n  description.textContent = 'Данные не загружены, перезагрузите страницу или попробуйте позднее';\n\n  popup.appendChild(close);\n  popup.appendChild(title);\n  popup.appendChild(description);\n\n  pageBody.appendChild(layout);\n  pageBody.appendChild(popup);\n\n  handlerKeyDown(pageBody, popup, layout);\n  handlerClick(layout, popup, layout);\n  handlerClick(close, popup, layout);\n}\n\nexport default createApiResponse;\n","import {mapFilterForm} from './utils.js';\nimport {getFilterPrice} from './helpers.js';\n\nconst anyValue = 'any';\n\nconst typeSelect = mapFilterForm.querySelector('#housing-type');\nconst priceSelect = mapFilterForm.querySelector('#housing-price');\nconst roomsSelect = mapFilterForm.querySelector('#housing-rooms');\nconst guestsSelect = mapFilterForm.querySelector('#housing-guests');\nconst featuresFieldset = mapFilterForm.querySelector('#housing-features');\n\nconst filtratedItem = (el, item, param) => el.value === anyValue ? true : el.value === item[param].toString();\n\nconst filtratedType = item => filtratedItem(typeSelect, item.offer, 'type');\n\nconst filtratedPrice = (item) => {\n  const filteringPrice = getFilterPrice[priceSelect.value];\n  return filteringPrice ? item.offer.price >= filteringPrice.min && item.offer.price <= filteringPrice.max : true;\n};\n\nconst filtratedRooms = item => filtratedItem(roomsSelect, item.offer, 'rooms');\n\nconst filtratedGuests = item => filtratedItem(guestsSelect, item.offer, 'guests');\n\nconst filtratedFeatures = (item) => {\n\n  const checkedFeaturesItems = featuresFieldset.querySelectorAll('input:checked');\n\n  const featuresArr = [...checkedFeaturesItems];\n\n  return featuresArr.every(element =>  item.offer.features.includes(element.value));\n};\n\n\nconst filtratedData = (data) => {\n\n  return data\n    .filter(filtratedType)\n    .filter(filtratedPrice)\n    .filter(filtratedRooms)\n    .filter(filtratedGuests)\n    .filter(filtratedFeatures);\n}\n\nexport default filtratedData;\n","import {INIT_COORDS, fieldAddress} from './utils.js';\n\nconst getType = {\n  flat: 'Квартира',\n  bungalow: 'Бунгало',\n  house: 'Дом',\n  palace: 'Дворец',\n}\n\nconst getMinPrice = {\n  flat: 1000,\n  bungalow: 0,\n  house: 5000,\n  palace: 10000,\n}\n\nconst getRoomsValue = {\n  1: [1],\n  2: [1, 2],\n  3: [1, 2, 3],\n  100: [0],\n}\n\nconst getFilterPrice = {\n  'low': {\n    min: 0,\n    max: 10000,\n  },\n  'middle': {\n    min: 10000,\n    max: 50000,\n  },\n  'high': {\n    min: 50000,\n    max: Infinity,\n  },\n}\n\n\nconst addDisabledValue = (array, value) => {\n  for (let item of array) {\n    item.disabled = value;\n  }\n}\n\nconst setAddressValue = () => {\n  fieldAddress.value = `${INIT_COORDS.lat}, ${INIT_COORDS.lng}`;\n};\n\nconst isEscEvent = (evt) => evt.key === 'Escape' || evt.key === 'Esc';\n\nconst handlerKeyDown = (targetElement, item) => {\n  targetElement.addEventListener('keydown', (evt) => {\n    if(isEscEvent(evt)) {\n      removeElement(item);\n    }\n  });\n}\n\nconst handlerClick = (targetElement, item, additionalItem) => {\n  targetElement.addEventListener('click', () => {\n    removeElement(item, additionalItem)\n  });\n}\n\nconst removeElement = (item, additionalItem) => {\n\n  document.removeEventListener('keydown', removeElement);\n  document.removeEventListener('click', removeElement);\n\n  item && item.remove();\n  additionalItem ? additionalItem.remove() : '';\n}\n\nexport {\n  addDisabledValue,\n  setAddressValue,\n  isEscEvent,\n  handlerClick,\n  handlerKeyDown,\n  removeElement,\n  getType,\n  getMinPrice,\n  getRoomsValue,\n  getFilterPrice\n}\n","/* global L:readonly */\nimport {INIT_COORDS, fieldAddress, mainForm, priceInput, mapFilterForm} from './utils.js';\nimport createPopup from './create-popup.js';\nimport filtratedData from './filters.js';\nimport {setAddressValue} from './helpers.js';\n\n\nconst POINTS_LIMIT = 10;\n\nconst btnReset = mainForm.querySelector('.ad-form__reset');\nconst avatar = mainForm.querySelector('.ad-form-header__preview > img');\nconst photo = mainForm.querySelector('.ad-form__photo');\n\nconst initMap = L.map('map-canvas');\n\nconst mainPinIcon = L.icon({\n  iconUrl: '../img/main-pin.svg',\n  iconSize: [52, 52],\n  iconAnchor: [26, 52],\n})\n\nconst mainPinMarker = L.marker(\n  {\n    lat: INIT_COORDS.lat,\n    lng: INIT_COORDS.lng,\n  },\n  {\n    draggable: true,\n    icon: mainPinIcon,\n  },\n);\n\nconst mapPoints = L.layerGroup().addTo(initMap);\n\ninitMap.setView({\n  lat: INIT_COORDS.lat,\n  lng: INIT_COORDS.lng,\n}, 9);\n\nL.tileLayer(\n  'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n  {\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n  },\n).addTo(initMap);\n\nmainPinMarker.addTo(initMap);\n\nfieldAddress.readOnly = true;\nfieldAddress.value = `${INIT_COORDS.lat}, ${INIT_COORDS.lng}`;\n\nmainPinMarker.addEventListener('mousemove', (evt) => {\n  const coords = evt.target.getLatLng();\n  fieldAddress.value = `${coords.lat.toFixed(5)}, ${coords.lng.toFixed(5)}`;\n});\n\n\nconst renderMarkers = (data) => {\n\n  mapPoints.clearLayers();\n\n  const resultData = filtratedData(data).slice(0, POINTS_LIMIT);\n\n  resultData.map(item => {\n\n    const {lat, lng} = item.location;\n\n    const popup = createPopup(item);\n\n    const icon = L.icon({\n      iconUrl: '../img/pin.svg',\n      iconSize: [40, 40],\n      iconAnchor: [20, 40],\n    });\n\n    const marker = L.marker({lat, lng}, {icon});\n\n    marker\n      .addTo(mapPoints)\n      .bindPopup(popup,\n        {\n          keepInView: true,\n        },\n      );\n  });\n}\n\nbtnReset.addEventListener('click', ()=> {\n  mainForm.reset();\n  priceInput.placeholder = '1000';\n  mapFilterForm.reset();\n  avatar.src = 'img/muffin-grey.svg';\n  photo.style.backgroundImage = '';\n  mapPoints.clearLayers();\n  setAddressValue();\n  mainPinMarker.setLatLng(INIT_COORDS);\n})\n\nexport default renderMarkers;\n","import {mainForm} from './utils.js';\n\n\nconst FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\n\n\nconst uploadImage = (inputSelector, previewSelector, previewIsNotImg = false) => {\n\n  const imageLoader = mainForm.querySelector(inputSelector);\n  const imagePreview = mainForm.querySelector(previewSelector);\n\n  imageLoader.addEventListener('change', () => {\n    const file = imageLoader.files[0];\n    const fileName = file.name.toLowerCase();\n\n    const matches = FILE_TYPES.some((it) => {\n      return fileName.endsWith(it);\n    });\n\n    if (matches) {\n      const reader = new FileReader();\n\n      reader.addEventListener('load', () => {\n        if (!previewIsNotImg) {\n          imagePreview.src = reader.result;\n        } else {\n          imagePreview.style.backgroundImage = `url(${reader.result}`;\n        }\n\n      })\n\n      reader.readAsDataURL(file);\n    }\n  })\n}\n\nexport default uploadImage;\n","import {priceInput, mainForm, typeFormInput, roomNumberSelect, capacitySelect} from './utils.js';\nimport {getMinPrice, getRoomsValue} from './helpers.js';\nimport {checkPriceValidity, checkRoomsValidity} from './validation.js';\nimport uploadImage from './upload-image.js';\n\n\nconst timeinSelect = mainForm.querySelector('#timein');\nconst timeoutSelect = mainForm.querySelector('#timeout');\n\n\nconst useForm = () => {\n\n  typeFormInput.addEventListener('change' , (evt) => {\n    const currentValue = evt.target.value;\n    priceInput.placeholder = getMinPrice[currentValue].toString();\n    checkPriceValidity();\n  })\n\n  timeinSelect.addEventListener('change', (evt) => {\n    timeoutSelect.value = evt.target.value;\n  })\n  timeoutSelect.addEventListener('change', (evt) => {\n    timeinSelect.value = evt.target.value;\n  })\n\n\n  const allCapacityOptions = capacitySelect.children;\n  const options = [...allCapacityOptions];\n  options.map(option => option.value !== '1' ? option.disabled = true : option.disabled = false);\n\n  roomNumberSelect.addEventListener('change', (evt) => {\n\n    const selectedValue = evt.target.value;\n    options.map(option => option.disabled = true);\n\n    getRoomsValue[selectedValue].map((item) => {\n      capacitySelect.querySelector('option' + '[value=\"' + item + '\"]').disabled = false;\n    })\n    checkRoomsValidity()\n  });\n\n  priceInput.addEventListener('input', () => checkPriceValidity());\n\n  uploadImage('#avatar', '.ad-form-header__preview > img');\n  uploadImage('#images', '.ad-form__photo', true);\n}\n\nexport default useForm;\n","const INIT_COORDS = {\n  lat: 35.68697,\n  lng: 139.75394,\n}\n\nconst pageBody = document.querySelector('body');\n\nconst mainForm = document.querySelector('.ad-form');\nconst mapFilterForm = document.querySelector('.map__filters');\nconst fieldAddress = mainForm.querySelector('#address');\nconst priceInput = mainForm.querySelector('#price');\nconst typeFormInput = mainForm.querySelector('#type');\nconst roomNumberSelect = mainForm.querySelector('#room_number');\nconst capacitySelect = mainForm.querySelector('#capacity');\n\n\nexport {\n  INIT_COORDS,\n  pageBody,\n  mainForm,\n  mapFilterForm,\n  fieldAddress,\n  priceInput,\n  typeFormInput,\n  roomNumberSelect,\n  capacitySelect\n}\n\n","import {priceInput, typeFormInput, roomNumberSelect, capacitySelect} from './utils.js';\nimport {getMinPrice, getRoomsValue} from './helpers.js';\n\n\nconst checkPriceValidity = () => {\n  const inputValue = priceInput.value;\n  const valueLimit = getMinPrice[typeFormInput.value];\n\n  if (inputValue < valueLimit) {\n    priceInput.setCustomValidity(`Цена должна не менее чем ${valueLimit} руб.`);\n  }\n  else {\n    priceInput.setCustomValidity('');\n  }\n  priceInput.reportValidity();\n};\n\nconst checkRoomsValidity = () => {\n  const roomGuests = getRoomsValue[roomNumberSelect.value];\n  const message = roomGuests.indexOf(+capacitySelect.value) === -1 ? 'Некорректное значение, выберите правильное' : '';\n  capacitySelect.setCustomValidity(message);\n};\n\nexport {checkPriceValidity, checkRoomsValidity}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import useForm from './use-form.js';\nimport renderMarkers from './map.js';\nimport {getData, setData} from './api.js';\n\n\nuseForm();\ngetData(renderMarkers);\nsetData();\n"],"sourceRoot":""}